<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dough & Delight - Handcrafted Soft Cookies</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            scroll-behavior: smooth;
        }
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }
        .bg-cream-gradient {
            background: linear-gradient(135deg, #fffcf2 0%, #f7ede2 50%, #f5ebe0 100%);
        }
        .cookie-card:hover {
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .img-container {
            position: relative;
            background: #f3f4f6;
            overflow: hidden;
            height: 16rem;
        }
        .loading-spinner {
            border: 3px solid rgba(141, 110, 99, 0.1);
            border-top: 3px solid #8d6e63;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-cream-gradient text-[#5e503f]">

    <!-- Navbar -->
    <nav class="fixed w-full z-50 glass-effect">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold tracking-tighter text-[#8d6e63]">Dough<span class="text-[#d4a373]">&</span>Delight</div>
            <div class="hidden md:flex space-x-8 font-medium">
                <a href="#home" class="hover:text-[#d4a373] transition">Beranda</a>
                <a href="#menu" class="hover:text-[#d4a373] transition">Menu</a>
                <a href="#about" class="hover:text-[#d4a373] transition">Tentang Kami</a>
                <a href="#contact" class="hover:text-[#d4a373] transition">Kontak</a>
            </div>
            <a href="https://wa.me/6282228574193" class="bg-[#8d6e63] text-white px-6 py-2 rounded-full hover:bg-[#a98467] transition shadow-lg">Pesan Sekarang</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="min-h-screen flex items-center pt-20 px-6">
        <div class="max-w-7xl mx-auto grid md:grid-cols-2 gap-12 items-center">
            <div class="space-y-6">
                <span class="inline-block px-4 py-1 bg-[#faedcd] text-[#8d6e63] rounded-full text-sm font-semibold tracking-wide">Premium Handcrafted Cookies</span>
                <h1 class="text-5xl md:text-7xl leading-tight">Gigitan Manis yang Bikin <span class="text-[#d4a373]">Ketagihan.</span></h1>
                <p class="text-lg text-gray-600 leading-relaxed">Soft cookies panggang segar setiap hari dengan bahan premium. Tekstur renyah di luar, sangat lembut dan lumer di dalam.</p>
                <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                    <a href="#menu" class="px-8 py-4 bg-[#8d6e63] text-white rounded-2xl text-center font-bold shadow-xl hover:bg-[#a98467] transition">Lihat Menu Kami</a>
                    <a href="https://wa.me/6282228574193" class="px-8 py-4 border-2 border-[#8d6e63] text-[#8d6e63] rounded-2xl text-center font-bold hover:bg-[#8d6e63] hover:text-white transition">Hubungi Admin</a>
                </div>
            </div>
            <div class="relative">
                <div class="absolute -top-10 -left-10 w-40 h-40 bg-[#faedcd] rounded-full blur-3xl opacity-50"></div>
                <img src="https://images.unsplash.com/photo-1499636136210-6f4ee915583e?auto=format&fit=crop&q=80&w=1000" alt="Delicious Soft Cookie" class="rounded-[2rem] shadow-2xl relative z-10 w-full object-cover aspect-square">
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-24 px-6 bg-white/50">
        <div class="max-w-7xl mx-auto">
            <div class="grid md:grid-cols-3 gap-12 text-center">
                <div class="p-8">
                    <div class="w-16 h-16 bg-[#faedcd] rounded-2xl flex items-center justify-center mx-auto mb-6">
                        <svg class="w-8 h-8 text-[#8d6e63]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-4">Bahan Premium</h3>
                    <p class="text-gray-600">Kami menggunakan mentega berkualitas tinggi dan cokelat Belgia terbaik untuk rasa yang tak terlupakan.</p>
                </div>
                <div class="p-8">
                    <div class="w-16 h-16 bg-[#faedcd] rounded-2xl flex items-center justify-center mx-auto mb-6">
                        <svg class="w-8 h-8 text-[#8d6e63]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-4">Panggang Tiap Hari</h3>
                    <p class="text-gray-600">Fresh from the oven. Kami hanya mengirim cookie yang dipanggang pada hari yang sama dengan pengiriman.</p>
                </div>
                <div class="p-8">
                    <div class="w-16 h-16 bg-[#faedcd] rounded-2xl flex items-center justify-center mx-auto mb-6">
                        <svg class="w-8 h-8 text-[#8d6e63]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-4">Pengiriman Aman</h3>
                    <p class="text-gray-600">Packaging eksklusif yang dirancang khusus untuk memastikan cookie sampai di tangan Anda tetap utuh.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Menu Section -->
    <section id="menu" class="py-24 px-6">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl mb-4 text-[#8d6e63]">Daftar Menu Kami</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Temukan varian rasa premium yang diproduksi secara higienis.</p>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Varian 1: Red Velvet Lava -->
                <div class="cookie-card bg-white rounded-[2rem] overflow-hidden shadow-lg border-2 border-[#d4a373]">
                    <div class="img-container">
                        <div id="loader-red-velvet" class="absolute inset-0 bg-gray-100 flex items-center justify-center"><div class="loading-spinner"></div></div>
                        <img id="img-red-velvet" src="" class="w-full h-full object-cover opacity-0 transition-opacity duration-500">
                    </div>
                    <div class="p-8">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-bold">Red Velvet Lava</h3>
                            <span class="text-[#8d6e63] font-bold">Rp 22k</span>
                        </div>
                        <p class="text-gray-600 mb-6">Dough merah elegan dengan isian cream cheese premium yang lumer.</p>
                        <button onclick="orderNow('Red Velvet Lava')" class="w-full py-3 rounded-xl bg-[#8d6e63] text-white hover:bg-[#a98467] transition font-semibold">Pesan Varian Ini</button>
                    </div>
                </div>

                <!-- Varian 2: Matcha Bliss -->
                <div class="cookie-card bg-white rounded-[2rem] overflow-hidden shadow-lg">
                    <div class="img-container">
                        <div id="loader-matcha" class="absolute inset-0 bg-gray-100 flex items-center justify-center"><div class="loading-spinner"></div></div>
                        <img id="img-matcha" src="" class="w-full h-full object-cover opacity-0 transition-opacity duration-500">
                    </div>
                    <div class="p-8">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-bold">Matcha Bliss</h3>
                            <span class="text-[#8d6e63] font-bold">Rp 20k</span>
                        </div>
                        <p class="text-gray-600 mb-6">Japanese Matcha premium dengan potongan white chocolate yang manis.</p>
                        <button onclick="orderNow('Matcha Bliss')" class="w-full py-3 rounded-xl bg-[#8d6e63] text-white hover:bg-[#a98467] transition font-semibold">Pesan Varian Ini</button>
                    </div>
                </div>

                <!-- Varian 3: Oreo Cloud -->
                <div class="cookie-card bg-white rounded-[2rem] overflow-hidden shadow-lg">
                    <div class="img-container">
                        <div id="loader-oreo" class="absolute inset-0 bg-gray-100 flex items-center justify-center"><div class="loading-spinner"></div></div>
                        <img id="img-oreo" src="" class="w-full h-full object-cover opacity-0 transition-opacity duration-500">
                    </div>
                    <div class="p-8">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-bold">Oreo Cloud</h3>
                            <span class="text-[#8d6e63] font-bold">Rp 20k</span>
                        </div>
                        <p class="text-gray-600 mb-6">Sensasi cookies and cream dengan tekstur yang sangat lembut.</p>
                        <button onclick="orderNow('Oreo Cloud')" class="w-full py-3 rounded-xl bg-[#8d6e63] text-white hover:bg-[#a98467] transition font-semibold">Pesan Varian Ini</button>
                    </div>
                </div>

                <!-- Varian 4: Midnight Dark -->
                <div class="cookie-card bg-white rounded-[2rem] overflow-hidden shadow-lg">
                    <div class="img-container">
                        <div id="loader-dark" class="absolute inset-0 bg-gray-100 flex items-center justify-center"><div class="loading-spinner"></div></div>
                        <img id="img-dark" src="" class="w-full h-full object-cover opacity-0 transition-opacity duration-500">
                    </div>
                    <div class="p-8">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-bold">Midnight Dark</h3>
                            <span class="text-[#8d6e63] font-bold">Rp 22k</span>
                        </div>
                        <p class="text-gray-600 mb-6">Dough cokelat pekat dengan dark chocolate chips premium.</p>
                        <button onclick="orderNow('Midnight Dark')" class="w-full py-3 rounded-xl bg-[#8d6e63] text-white hover:bg-[#a98467] transition font-semibold">Pesan Varian Ini</button>
                    </div>
                </div>

                <!-- Varian 5: Classic Choco -->
                <div class="cookie-card bg-white rounded-[2rem] overflow-hidden shadow-lg">
                    <img src="https://images.unsplash.com/photo-1558961363-fa8fdf82db35?auto=format&fit=crop&q=80&w=800" class="w-full h-64 object-cover" alt="Classic Choco">
                    <div class="p-8">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-bold">Classic Choco</h3>
                            <span class="text-[#8d6e63] font-bold">Rp 18k</span>
                        </div>
                        <p class="text-gray-600 mb-6">Resep original dengan chocolate chips klasik yang melimpah.</p>
                        <button onclick="orderNow('Classic Choco')" class="w-full py-3 rounded-xl bg-[#8d6e63] text-white hover:bg-[#a98467] transition font-semibold">Pesan Varian Ini</button>
                    </div>
                </div>

                <!-- Varian 6: Lotus Biscoff -->
                <div class="cookie-card bg-white rounded-[2rem] overflow-hidden shadow-lg">
                    <img src="https://images.unsplash.com/photo-1559622214-f8a9850965bb?auto=format&fit=crop&q=80&w=800" class="w-full h-64 object-cover" alt="Lotus Biscoff">
                    <div class="p-8">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-bold">Lotus Biscoff</h3>
                            <span class="text-[#8d6e63] font-bold">Rp 20k</span>
                        </div>
                        <p class="text-gray-600 mb-6">Topping biskuit Lotus renyah dengan rasa karamel yang khas.</p>
                        <button onclick="orderNow('Lotus Biscoff')" class="w-full py-3 rounded-xl bg-[#8d6e63] text-white hover:bg-[#a98467] transition font-semibold">Pesan Varian Ini</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-24 px-6">
        <div class="max-w-4xl mx-auto glass-effect rounded-[3rem] p-12 text-center shadow-2xl">
            <h2 class="text-4xl mb-6 text-[#8d6e63]">Hubungi Admin Kami</h2>
            <p class="text-lg text-gray-600 mb-10">Kami siap melayani pesanan Anda setiap hari. Jangan ragu untuk bertanya!</p>
            <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-6">
                <a href="https://wa.me/6282228574193" class="inline-flex items-center px-10 py-4 bg-[#8d6e63] text-white rounded-2xl font-bold hover:scale-105 transition transform shadow-lg">
                    Chat Admin (WhatsApp)
                </a>
                <div class="text-left">
                    <p class="text-sm font-bold">WhatsApp:</p>
                    <p class="text-lg font-medium text-[#8d6e63]">0822-2857-4193</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-[#5e503f] text-[#f5ebe0] py-12 px-6">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center">
            <div class="text-2xl font-bold mb-4 md:mb-0">Dough<span class="text-[#d4a373]">&</span>Delight</div>
            <div class="text-sm opacity-50">&copy; 2024 Dough & Delight. Handcrafted with Love.</div>
        </div>
    </footer>

    <script>
        const apiKey = ""; 

        /**
         * Fungsi fetchImage dengan Exponential Backoff dan Robust Error Handling
         */
        async function fetchImage(id, prompt) {
            const imgElement = document.getElementById(`img-${id}`);
            const loader = document.getElementById(`loader-${id}`);
            const fallbackUrl = "https://images.unsplash.com/photo-1499636136210-6f4ee915583e?auto=format&fit=crop&q=80&w=800";
            
            const maxRetries = 5;
            let delay = 1000;

            for (let i = 0; i < maxRetries; i++) {
                try {
                    // Validasi awal: Jika API key kosong, langsung ke fallback (menghindari error JSON kosong)
                    if (!apiKey) {
                        throw new Error("API Key is missing");
                    }

                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            instances: { prompt: prompt }, 
                            parameters: { sampleCount: 1 } 
                        })
                    });

                    // Cek jika response OK (200-299)
                    if (!response.ok) {
                        throw new Error(`HTTP Error: ${response.status}`);
                    }

                    const result = await response.json();
                    
                    if (result && result.predictions && result.predictions[0] && result.predictions[0].bytesBase64Encoded) {
                        const imageUrl = `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
                        imgElement.src = imageUrl;
                        imgElement.onload = () => {
                            imgElement.classList.remove('opacity-0');
                            loader.style.display = 'none';
                        };
                        return; // Berhasil, keluar dari fungsi
                    } else {
                        throw new Error("Invalid response format from API");
                    }

                } catch (error) {
                    console.error(`Attempt ${i+1} failed for ${id}:`, error.message);
                    
                    // Jika ini bukan percobaan terakhir, tunggu sebelum retry
                    if (i < maxRetries - 1) {
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2; // Exponential backoff
                    } else {
                        // Semua retry gagal, gunakan fallback
                        imgElement.src = fallbackUrl;
                        imgElement.onload = () => {
                            imgElement.classList.remove('opacity-0');
                            loader.style.display = 'none';
                        };
                    }
                }
            }
        }

        function orderNow(variant) {
            const message = `Halo Dough & Delight, saya ingin memesan varian: ${variant}. Mohon info selanjutnya ya!`;
            window.open(`https://wa.me/6282228574193?text=${encodeURIComponent(message)}`, '_blank');
        }

        window.onload = () => {
            // Memanggil fetchImage setelah window load
            fetchImage('red-velvet', 'Gourmet red velvet soft cookie with melting cream cheese center, professional food photography, shallow depth of field');
            fetchImage('matcha', 'Soft green tea matcha cookie with white chocolate chunks, professional food photography, bright studio lighting');
            fetchImage('oreo', 'Soft black and white cookies and cream cookie with oreo pieces, professional food photography, minimalist background');
            fetchImage('dark', 'Thick dark chocolate soft cookie with molten chocolate chips, rich texture, moody food photography');
        };
    </script>
</body>
</html>